# SQL 실행계획이 바뀌게 되는 대표적인 이유

옵티마이저가 적합하다고 판단하면 SQL 실행계획이 바뀌게 된다.

옵티마이저가 새 계획을 생성하는 4가지 이유는 아래와 같다.

1. `데이터 변경`

   분명히 데이터 변경으로 인해 옵티마이저가 계획을 변경할 수 있습니다.

   데이터 증가 또는 감소가 자동 통계 업데이트를 위한

   엔진 임계값 보류를 충족하면 대부분의 경우 문제가 되지 않습니다.
    
   ---

2. `오래된 통계`

   통계는 옵티마이저가 저장 프로시저에 가장 적합한 계획을 생성하는지 확인하는 데 중요합니다.

   통계가 오래된 경우 계획이 잘못 구축될 수 있음을 의미합니다.
    
   ---

3. `형태가 잘못된 인덱스`

   나는 실행 계획이 인덱스 "a"를 사용하고

   24시간 후에 동일한 인덱스를 사용하지 않고

   클러스터링된 기본 키 인덱스를 사용했던 것을 보았습니다.

   이것은 옵티마이저가 인덱스 "a"에 비해

   클러스터된 인덱스에서 데이터를 더 빨리 가져올 수 있다고 보았기 때문에 발생했습니다.

   볼륨이 높고 트랜잭션이 많은 응용 프로그램이 있는 경우

   인덱스 유지 관리 계획을 통해 인덱스 조각화를 유지 관리할 것을 제안합니다.
    
   ---

4. `잘못된 쿼리 코드`

   쿼리에 잘못된 조인과 같은 일부 잘못된 코드가 있을 수 있습니다.